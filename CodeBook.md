# Data Science
Data Science stuff for Coursera

## Data Cleaning Project

### Summary
This folder contains the run_analysis.R script for producing a tidy data set from the data in the UCI_HAR_Dataset data set.  These data are of the activity of 30 volunteers and contain data collected from the accelerometers from the Samsung Galaxy S smartphone. See the link for more details.... http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones

The script produces a tidy data set, with rows per activity per subject.  
The final data set has a table of dimensions 180 x 68.

Broadly, the script takes the following steps.

* Read in all data
* Merge data into one, master data set
* Extracts only the measurements on the mean and standard deviation for each variable
* Renames columns to be more useful, and converts activity IDs to meaningful character strings
* Creates a final data set with the average of each variable for each activity and each subject
* Additionally, the script rounds the variable values for presentability.
* Finally, some simple checks are made to confirm the data transformations are accurate.

### Data Summary
The final, tidy data set is written to a file - tidyData.txt
The data set comprises 180 observations of 68 variables.
The observations are of 6 different activities, by 30 volunteers (or subjects)

The 6 actvities are 

* ID      ActivityLabel
* 1            WALKING
* 2   WALKING_UPSTAIRS
* 3 WALKING_DOWNSTAIRS
* 4            SITTING
* 5           STANDING
* 6             LAYING

There are 30 subjects(volunteers), represented by numbers 1 through 30.

The tidy data set columns are...

* ActivityLabel           : Factor w/ 6 levels "LAYING","SITTING",..: 1 1 1 1 1 1 1 1 1 1 ...
* Subject                 : int  1 2 3 4 5 6 7 8 9 10 ...
* tBodyAccmeanX           : num  0.222 0.281 0.276 0.264 0.278 ...
* tBodyAccmeanY           : num  -0.0405 -0.0182 -0.019 -0.015 -0.0183 -0.0103 -0.0204 -0.0212 -0.0205 -0.0243 ...
* tBodyAccmeanZ           : num  -0.113 -0.107 -0.101 -0.111 -0.108 ...
* tBodyAccstdX            : num  -0.928 -0.974 -0.983 -0.954 -0.966 ...
* tBodyAccstdY            : num  -0.837 -0.98 -0.962 -0.942 -0.969 ...
* tBodyAccstdZ            : num  -0.826 -0.984 -0.964 -0.963 -0.969 ...
* tGravityAccmeanX        : num  -0.249 -0.51 -0.242 -0.421 -0.483 ...
* tGravityAccmeanY        : num  0.706 0.752 0.837 0.915 0.955 ...
* tGravityAccmeanZ        : num  0.446 0.647 0.489 0.342 0.264 ...
* tGravityAccstdX         : num  -0.897 -0.959 -0.983 -0.921 -0.946 ...
* tGravityAccstdY         : num  -0.908 -0.988 -0.981 -0.97 -0.986 ...
* tGravityAccstdZ         : num  -0.852 -0.984 -0.965 -0.976 -0.977 ...
* tBodyAccJerkmeanX       : num  0.0811 0.0826 0.077 0.0934 0.0848 0.0963 0.0969 0.0878 0.0881 0.0738 ...
* tBodyAccJerkmeanY       : num  0.0038 0.0123 0.0138 0.0069 0.0075 -0.0011 0.0251 0.0233 0.0116 0.0157 ...
* tBodyAccJerkmeanZ       : num  0.0108 -0.0018 -0.0044 -0.0064 -0.003 0.0033 -0.0132 -0.0169 -0.0071 0.0072 ...
* tBodyAccJerkstdX        : num  -0.959 -0.986 -0.981 -0.978 -0.983 ...
* tBodyAccJerkstdY        : num  -0.924 -0.983 -0.969 -0.942 -0.965 ...
* tBodyAccJerkstdZ        : num  -0.955 -0.988 -0.982 -0.979 -0.985 ...
* tBodyGyromeanX          : num  -0.0166 -0.0185 -0.0208 -0.0092 -0.0219 -0.008 -0.0028 0.0054 -0.0136 -0.0196 ...
* tBodyGyromeanY          : num  -0.0645 -0.1118 -0.0719 -0.093 -0.0799 ...
* tBodyGyromeanZ          : num  0.149 0.145 0.138 0.17 0.16 ...
* tBodyGyrostdX           : num  -0.874 -0.988 -0.975 -0.973 -0.98 ...
* tBodyGyrostdY           : num  -0.951 -0.982 -0.977 -0.961 -0.977 ...
* tBodyGyrostdZ           : num  -0.908 -0.96 -0.964 -0.962 -0.961 ...
* tBodyGyroJerkmeanX      : num  -0.107 -0.102 -0.1 -0.105 -0.102 ...
* tBodyGyroJerkmeanY      : num  -0.0415 -0.0359 -0.039 -0.0381 -0.0404 -0.0424 -0.0359 -0.039 -0.0276 -0.0389 ...
* tBodyGyroJerkmeanZ      : num  -0.0741 -0.0702 -0.0687 -0.0712 -0.0708 -0.0718 -0.0672 -0.0694 -0.0569 -0.0591 ...
* tBodyGyroJerkstdX       : num  -0.919 -0.993 -0.98 -0.975 -0.983 ...
* tBodyGyroJerkstdY       : num  -0.968 -0.99 -0.987 -0.987 -0.984 ...
* tBodyGyroJerkstdZ       : num  -0.958 -0.988 -0.983 -0.984 -0.99 ...
* tBodyAccMagmean         : num  -0.842 -0.977 -0.973 -0.955 -0.967 ...
* tBodyAccMagstd          : num  -0.795 -0.973 -0.964 -0.931 -0.959 ...
* tGravityAccMagmean      : num  -0.842 -0.977 -0.973 -0.955 -0.967 ...
* tGravityAccMagstd       : num  -0.795 -0.973 -0.964 -0.931 -0.959 ...
* tBodyAccJerkMagmean     : num  -0.954 -0.988 -0.98 -0.97 -0.98 ...
* tBodyAccJerkMagstd      : num  -0.928 -0.986 -0.976 -0.961 -0.978 ...
* tBodyGyroMagmean        : num  -0.875 -0.95 -0.952 -0.93 -0.947 ...
* tBodyGyroMagstd         : num  -0.819 -0.961 -0.954 -0.947 -0.958 ...
* tBodyGyroJerkMagmean    : num  -0.964 -0.992 -0.987 -0.985 -0.986 ...
* tBodyGyroJerkMagstd     : num  -0.936 -0.99 -0.983 -0.983 -0.984 ...
* fBodyAccmeanX           : num  -0.939 -0.977 -0.981 -0.959 -0.969 ...
* fBodyAccmeanY           : num  -0.867 -0.98 -0.961 -0.939 -0.965 ...
* fBodyAccmeanZ           : num  -0.883 -0.984 -0.968 -0.968 -0.977 ...
* fBodyAccstdX            : num  -0.924 -0.973 -0.984 -0.953 -0.965 ...
* fBodyAccstdY            : num  -0.834 -0.981 -0.964 -0.946 -0.973 ...
* fBodyAccstdZ            : num  -0.813 -0.985 -0.963 -0.962 -0.966 ...
* fBodyAccJerkmeanX       : num  -0.957 -0.986 -0.981 -0.979 -0.983 ...
* fBodyAccJerkmeanY       : num  -0.922 -0.983 -0.969 -0.944 -0.965 ...
* fBodyAccJerkmeanZ       : num  -0.948 -0.986 -0.979 -0.975 -0.983 ...
* fBodyAccJerkstdX        : num  -0.964 -0.987 -0.983 -0.98 -0.986 ...
* fBodyAccJerkstdY        : num  -0.932 -0.985 -0.971 -0.944 -0.966 ...
* fBodyAccJerkstdZ        : num  -0.961 -0.989 -0.984 -0.98 -0.986 ...
* fBodyGyromeanX          : num  -0.85 -0.986 -0.97 -0.967 -0.976 ...
* fBodyGyromeanY          : num  -0.952 -0.983 -0.978 -0.972 -0.978 ...
* fBodyGyromeanZ          : num  -0.909 -0.963 -0.962 -0.962 -0.963 ...
* fBodyGyrostdX           : num  -0.882 -0.989 -0.976 -0.975 -0.981 ...
* fBodyGyrostdY           : num  -0.951 -0.982 -0.977 -0.956 -0.977 ...
* fBodyGyrostdZ           : num  -0.917 -0.963 -0.967 -0.966 -0.963 ...
* fBodyAccMagmean         : num  -0.862 -0.975 -0.966 -0.939 -0.962 ...
* fBodyAccMagstd          : num  -0.798 -0.975 -0.968 -0.937 -0.963 ...
* fBodyBodyAccJerkMagmean : num  -0.933 -0.985 -0.976 -0.962 -0.977 ...
* fBodyBodyAccJerkMagstd  : num  -0.922 -0.985 -0.975 -0.958 -0.976 ...
* fBodyBodyGyroMagmean    : num  -0.862 -0.972 -0.965 -0.962 -0.968 ...
* fBodyBodyGyroMagstd     : num  -0.824 -0.961 -0.955 -0.947 -0.959 ...
* fBodyBodyGyroJerkMagmean: num  -0.942 -0.99 -0.984 -0.984 -0.985 ...
* fBodyBodyGyroJerkMagstd : num  -0.933 -0.99 -0.983 -0.983 -0.983 ...

### Processing steps in detail

#### Read in all data
The following data.frames are created...

* trainData       from 'train/X_train.txt': Training set.
* trainActivities from 'train/y_train.txt': Training actvities.
* trainSubjects   from 'train/subject_train.txt': Each row identifies the subject who performed the activity for each window sample. Its range is from 1 to 30. 
* testData        from 'test/X_test.txt': Test set.
* testActivities  from 'train/y_train.txt': Training actvities.
* testSubjects    from 'test/subject_test.txt': As trainSubjects but for tests
* features        from 'features.txt': List of all features/variables.
* activityLabels  from 'activity_labels.txt': Links the class labels with their activity name.

The column names for the activities and subjects are set to "Activity" and "Subject" respectively.

####Merge the training and the test sets to create one data set
The columns for the Actvities and Subjects are merged first with their respective data set.
The two resulting data.frames are then merged, to create one, master data set.

Input data sets' dimensions...

* trainDataAll - 7352 x 563
* testDataAll  - 2947 x 563

Combined data set dimensions...

* allData      - 10299 x 563

####Extract only the measurements on the mean and standard deviation for each measurement

From features_info.txt, the means and standard deviations have a format

* mean(): Mean value
* std(): Standard deviation

These columns are extracted, and the column names set from the features data.frame. 
For readability, the '()' and '-' characters are removed.

####Use descriptive activity names to name the activities in the data set
The actvity numbers are replaced with their character string equivalents.

####create a second, independent tidy data set with the average of each variable for each activity and each subject
The master data.frame is reshaped with melt and dcast (from reshape2) to get the mean for each variable.
The data are rounded to four digits for presentability.

####Testing
Some simple data checks are preformed, comparing the means from the reshaped, tidy data set with the original datasets before any reshaping has taken place.

